/* =======================================================================
   OkObserver — override.css  (FULL REPLACEMENT)
   - Hamburger-only header, right-justified
   - Motto centered under logo
   - Unbreakable 4/3/1 grid with very high specificity
   - Image fit on summaries; consistent video embeds
   - Tag list formatting
   - Place this as the LAST stylesheet
   ======================================================================= */

/* --------- Header --------- */
:root body #siteHeader,
:root body header.site-header {
  position: sticky; top: 0; z-index: 50;
  background: #1e73be; color: #fff;
  box-shadow: 0 2px 8px rgba(0,0,0,.08);
}

:root body #siteHeader .bar,
:root body header.site-header .bar,
:root body header .header-bar,
:root body #header .bar {
  display: flex !important;
  align-items: center !important;
  gap: 12px !important;
  min-height: 72px !important;
  padding: 10px 18px !important;
}

/* Logo */
:root body #siteHeader .logo,
:root body header .logo {
  line-height: 0 !important;
}

/* Motto centered under the logo line */
:root body #siteHeader .motto,
:root body header .motto {
  width: 100% !important;
  text-align: center !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  color: #e9f3ff !important;
}

/* Hamburger shown on desktop & mobile, right-justified */
:root body #siteHeader .menu-toggle,
:root body header .menu-toggle,
:root body #hamburger, :root body #hamButton,
:root body .hamburger-button {
  margin-left: auto !important;        /* right align */
  display: inline-flex !important;      /* always visible */
  align-items: center !important;
  justify-content: center !important;
  width: 40px !important; height: 40px !important;
  border-radius: 10px !important; border: 0 !important;
  background: rgba(255,255,255,.14) !important; color: #fff !important;
  cursor: pointer !important;
}
:root body #siteHeader .menu-toggle:hover,
:root body header .menu-toggle:hover,
:root body #hamburger:hover, :root body #hamButton:hover,
:root body .hamburger-button:hover {
  background: rgba(255,255,255,.22) !important;
}

/* Hide any inline nav links so hamburger is the only nav */
:root body #siteHeader .nav, :root body #siteHeader .nav-links,
:root body header .nav, :root body header .nav-links,
:root body .primary-nav, :root body .nav-inline {
  display: none !important;
}

/* --------- Grid (unbreakable) ---------
   Target every plausible container name with ultra-high specificity.
   Falls back to 1 col; bumps to 3 at 900px; 4 at 1200px. */
:root body #app .posts-grid,
:root body #app .cards-grid,
:root body #app #postsGrid,
:root body main .posts-grid,
:root body main #postsGrid,
:root body #content .posts-grid,
:root body #content #postsGrid,
:root body .entry-grid,
:root body .post-list,
:root body .post-grid {
  display: grid !important;
  gap: 24px !important;
  grid-template-columns: repeat(1, 1fr) !important;  /* mobile */
}

/* Tablet (≥900px) */
@media (min-width: 900px) {
  :root body #app .posts-grid,
  :root body #app .cards-grid,
  :root body #app #postsGrid,
  :root body main .posts-grid,
  :root body main #postsGrid,
  :root body #content .posts-grid,
  :root body #content #postsGrid,
  :root body .entry-grid,
  :root body .post-list,
  :root body .post-grid {
    grid-template-columns: repeat(3, 1fr) !important;
  }
}

/* Desktop (≥1200px) */
@media (min-width: 1200px) {
  :root body #app .posts-grid,
  :root body #app .cards-grid,
  :root body #app #postsGrid,
  :root body main .posts-grid,
  :root body main #postsGrid,
  :root body #content .posts-grid,
  :root body #content #postsGrid,
  :root body .entry-grid,
  :root body .post-list,
  :root body .post-grid {
    grid-template-columns: repeat(4, 1fr) !important;
  }
}

/* Ensure nothing collapses the grid to flex/blocks later */
#postsGrid, .posts-grid, .cards-grid, .post-grid, .post-list, .entry-grid {
  flex: initial !important;
  max-width: none !important;
}

/* --------- Cards & Media --------- */
.post-card, .card {
  background: #fff; border-radius: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,.06);
  overflow: hidden;
}
.post-card .thumb, .card .thumb,
.post-card .media, .card .media {
  position: relative; background: #f7f8fb;
  aspect-ratio: 16/9; overflow: hidden;
}
.post-card .thumb img, .card .thumb img,
.post-card .media img, .card .media img {
  width: 100%; height: 100%; object-fit: contain !important; /* no cropping */
  display: block; background: #fff;
}
.post-card .body, .card .body { padding: 14px 16px 18px; }

/* --------- Video --------- */
.video-embed iframe, .video-embed video,
.embed-responsive iframe, .wp-block-embed__wrapper iframe {
  width: 100%; aspect-ratio: 16/9; height: auto; display: block;
  background: #000; border: 0;
}

/* --------- Tags --------- */
.tags, .post-tags { padding: 8px 0 0; }
.tags ul, .post-tags ul { margin: 0; padding: 0 0 0 1.25rem; }
.tags li, .post-tags li { list-style: disc; line-height: 1.4; margin: 2px 0; }

/* --------- Links/Foot --------- */
a { color: #184f99; text-decoration: none; }
a:hover { text-decoration: underline; }
footer.site-footer { padding: 24px 12px; color: #666; }

/* --------------------------------------------------------------------------
   OPTIONAL density helpers used by Settings.js.
   These are inert until the body gets one of the classes below.
   They DO NOT change your responsive column logic.
-------------------------------------------------------------------------- */
body.density-comfortable .post-card { margin: 14px; }
body.density-compact .post-card    { margin: 8px;  }
/* If your grid wrapper is .post-grid or .posts-grid, you may (optionally) add:
   body.density-comfortable .post-grid, body.density-comfortable .posts-grid { gap: 16px; }
   body.density-compact .post-grid,    body.density-compact .posts-grid    { gap: 10px; }
*/
/* === OkObserver: visibility lock for post summaries (2025-10-31p-VIS) === */
/* Guarantees titles, bylines, and excerpts are visible under images/cards. */
/* High specificity + !important but scoped only to post-card content.       */

:root body .post-card,
:root body .post-card .body { background: #fff !important; }

:root body .post-card .thumb,
:root body .post-card .media {
  position: relative !important;
  z-index: 0 !important;
}

:root body .post-card .body {
  position: relative !important;
  z-index: 1 !important;          /* ensure text sits above any overlapping media */
  display: block !important;
  padding: 14px 16px 16px !important;
  color: #111 !important;
  font-size: 1rem !important;     /* defend against accidental font-size:0 */
  opacity: 1 !important;          /* defend against accidental opacity:0   */
  visibility: visible !important; /* defend against accidental visibility:hidden */
}

:root body .post-card h3,
:root body .post-card .byline,
:root body .post-card p {
  display: block !important;
  color: #111 !important;
  opacity: 1 !important;
  visibility: visible !important;
  margin: 0 0 .35rem 0 !important;
  line-height: 1.35 !important;
}

:root body .post-card h3 { 
  margin-bottom: .4rem !important; 
  font-size: 1.05rem !important; 
}

:root body .post-card .byline {
  color: #667 !important;
  font-size: .9rem !important;
}

:root body .post-card a {
  color: inherit !important;
  text-decoration: none !important;
}

:root body .post-card .thumb img,
:root body .post-card .media img {
  position: relative !important;  /* prevent absolute overlap from themes */
  z-index: 0 !important;
  display: block !important;
}

/* If any global rule is layering images above content with z-index, neuter it */
:root body .post-card * {
  text-rendering: auto !important;   /* defend against odd text rendering hacks */
}
/* === OkObserver: final unmask for post summary visibility (2025-10-31p-VIS2) === */
/* Some themes keep the image as absolute overlay; this resets it safely. */

.post-card .thumb img,
.post-card .media img {
  position: relative !important;
  z-index: 0 !important;
  pointer-events: none !important;  /* <-- crucial: prevents image overlay from blocking text */
  opacity: 1 !important;
}

.post-card .thumb,
.post-card .media {
  overflow: visible !important;      /* allow text below to show fully */
  position: relative !important;
}

.post-card .body {
  background: #fff !important;
  position: relative !important;
  z-index: 2 !important;             /* higher than any image overlay */
  pointer-events: auto !important;
  display: block !important;
}
