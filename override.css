/* =======================================================================
   OkObserver — override.css  (FULL REPLACEMENT)
   - Hamburger-only header, right-justified
   - Motto centered under logo
   - Unbreakable 4/3/1 grid with very high specificity
   - Image fit on summaries; consistent video embeds
   - Tag list formatting
   - Place this as the LAST stylesheet
   ======================================================================= */

/* --------- Header --------- */
:root body #siteHeader,
:root body header.site-header {
  position: sticky; top: 0; z-index: 50;
  background: #1e73be; color: #fff;
  box-shadow: 0 2px 8px rgba(0,0,0,.08);
}

:root body #siteHeader .bar,
:root body header.site-header .bar,
:root body header .header-bar,
:root body #header .bar {
  display: flex !important;
  align-items: center !important;
  gap: 12px !important;
  min-height: 72px !important;
  padding: 10px 18px !important;
}

/* Logo */
:root body #siteHeader .logo,
:root body header .logo {
  line-height: 0 !important;
}

/* Motto centered under the logo line */
:root body #siteHeader .motto,
:root body header .motto {
  width: 100% !important;
  text-align: center !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  color: #e9f3ff !important;
}

/* Hamburger shown on desktop & mobile, right-justified */
:root body #siteHeader .menu-toggle,
:root body header .menu-toggle,
:root body #hamburger, :root body #hamButton,
:root body .hamburger-button {
  margin-left: auto !important;        /* right align */
  display: inline-flex !important;      /* always visible */
  align-items: center !important;
  justify-content: center !important;
  width: 40px !important; height: 40px !important;
  border-radius: 10px !important; border: 0 !important;
  background: rgba(255,255,255,.14) !important; color: #fff !important;
  cursor: pointer !important;
}
:root body #siteHeader .menu-toggle:hover,
:root body header .menu-toggle:hover,
:root body #hamburger:hover, :root body #hamButton:hover,
:root body .hamburger-button:hover {
  background: rgba(255,255,255,.22) !important;
}

/* Hide any inline nav links so hamburger is the only nav */
:root body #siteHeader .nav, :root body #siteHeader .nav-links,
:root body header .nav, :root body header .nav-links,
:root body .primary-nav, :root body .nav-inline {
  display: none !important;
}

/* --------- Grid (unbreakable) ---------
   Target every plausible container name with ultra-high specificity.
   Falls back to 1 col; bumps to 3 at 900px; 4 at 1200px. */
:root body #app .posts-grid,
:root body #app .cards-grid,
:root body #app #postsGrid,
:root body main .posts-grid,
:root body main #postsGrid,
:root body #content .posts-grid,
:root body #content #postsGrid,
:root body .entry-grid,
:root body .post-list,
:root body .post-grid {
  display: grid !important;
  gap: 24px !important;
  grid-template-columns: repeat(1, 1fr) !important;  /* mobile */
}

/* Tablet (≥900px) */
@media (min-width: 900px) {
  :root body #app .posts-grid,
  :root body #app .cards-grid,
  :root body #app #postsGrid,
  :root body main .posts-grid,
  :root body main #postsGrid,
  :root body #content .posts-grid,
  :root body #content #postsGrid,
  :root body .entry-grid,
  :root body .post-list,
  :root body .post-grid {
    grid-template-columns: repeat(3, 1fr) !important;
  }
}

/* Desktop (≥1200px) */
@media (min-width: 1200px) {
  :root body #app .posts-grid,
  :root body #app .cards-grid,
  :root body #app #postsGrid,
  :root body main .posts-grid,
  :root body main #postsGrid,
  :root body #content .posts-grid,
  :root body #content #postsGrid,
  :root body .entry-grid,
  :root body .post-list,
  :root body .post-grid {
    grid-template-columns: repeat(4, 1fr) !important;
  }
}

/* Ensure nothing collapses the grid to flex/blocks later */
#postsGrid, .posts-grid, .cards-grid, .post-grid, .post-list, .entry-grid {
  flex: initial !important;
  max-width: none !important;
}

/* --------- Cards & Media --------- */
.post-card, .card {
  background: #fff; border-radius: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,.06);
  overflow: hidden;
}
.post-card .thumb, .card .thumb,
.post-card .media, .card .media {
  position: relative; background: #f7f8fb;
  aspect-ratio: 16/9; overflow: hidden;
}
.post-card .thumb img, .card .thumb img,
.post-card .media img, .card .media img {
  width: 100%; height: 100%; object-fit: contain !important; /* no cropping */
  display: block; background: #fff;
}
.post-card .body, .card .body { padding: 14px 16px 18px; }

/* --------- Video --------- */
.video-embed iframe, .video-embed video,
.embed-responsive iframe, .wp-block-embed__wrapper iframe {
  width: 100%; aspect-ratio: 16/9; height: auto; display: block;
  background: #000; border: 0;
}

/* --------- Tags --------- */
.tags, .post-tags { padding: 8px 0 0; }
.tags ul, .post-tags ul { margin: 0; padding: 0 0 0 1.25rem; }
.tags li, .post-tags li { list-style: disc; line-height: 1.4; margin: 2px 0; }

/* --------- Links/Foot --------- */
a { color: #184f99; text-decoration: none; }
a:hover { text-decoration: underline; }
footer.site-footer { padding: 24px 12px; color: #666; }

/* --------------------------------------------------------------------------
   OPTIONAL density helpers used by Settings.js.
   These are inert until the body gets one of the classes below.
   They DO NOT change your responsive column logic.
-------------------------------------------------------------------------- */
body.density-comfortable .post-card { margin: 14px; }
body.density-compact .post-card    { margin: 8px;  }
/* If your grid wrapper is .post-grid or .posts-grid, you may (optionally) add:
   body.density-comfortable .post-grid, body.density-comfortable .posts-grid { gap: 16px; }
   body.density-compact .post-grid,    body.density-compact .posts-grid    { gap: 10px; }
*/
/* === OkObserver: visibility lock for post summaries (2025-10-31p-VIS) === */
/* Guarantees titles, bylines, and excerpts are visible under images/cards. */
/* High specificity + !important but scoped only to post-card content.       */

:root body .post-card,
:root body .post-card .body { background: #fff !important; }

:root body .post-card .thumb,
:root body .post-card .media {
  position: relative !important;
  z-index: 0 !important;
}

:root body .post-card .body {
  position: relative !important;
  z-index: 1 !important;          /* ensure text sits above any overlapping media */
  display: block !important;
  padding: 14px 16px 16px !important;
  color: #111 !important;
  font-size: 1rem !important;     /* defend against accidental font-size:0 */
  opacity: 1 !important;          /* defend against accidental opacity:0   */
  visibility: visible !important; /* defend against accidental visibility:hidden */
}

:root body .post-card h3,
:root body .post-card .byline,
:root body .post-card p {
  display: block !important;
  color: #111 !important;
  opacity: 1 !important;
  visibility: visible !important;
  margin: 0 0 .35rem 0 !important;
  line-height: 1.35 !important;
}

:root body .post-card h3 { 
  margin-bottom: .4rem !important; 
  font-size: 1.05rem !important; 
}

:root body .post-card .byline {
  color: #667 !important;
  font-size: .9rem !important;
}

:root body .post-card a {
  color: inherit !important;
  text-decoration: none !important;
}

:root body .post-card .thumb img,
:root body .post-card .media img {
  position: relative !important;  /* prevent absolute overlap from themes */
  z-index: 0 !important;
  display: block !important;
}

/* If any global rule is layering images above content with z-index, neuter it */
:root body .post-card * {
  text-rendering: auto !important;   /* defend against odd text rendering hacks */
}
/* === OkObserver: final unmask for post summary visibility (2025-10-31p-VIS2) === */
/* Some themes keep the image as absolute overlay; this resets it safely. */

.post-card .thumb img,
.post-card .media img {
  position: relative !important;
  z-index: 0 !important;
  pointer-events: none !important;  /* <-- crucial: prevents image overlay from blocking text */
  opacity: 1 !important;
}

.post-card .thumb,
.post-card .media {
  overflow: visible !important;      /* allow text below to show fully */
  position: relative !important;
}

.post-card .body {
  background: #fff !important;
  position: relative !important;
  z-index: 2 !important;             /* higher than any image overlay */
  pointer-events: auto !important;
  display: block !important;
}
/* === OkObserver: overlay neutralizer (2025-10-31p-VIS3, TEMP DIAG) === */
/* Goal: kill any absolute ::before/::after or overlay layers, and force
   a new stacking context so the text body sits on top. */

.post-card {
  position: relative !important;
  isolation: isolate !important;      /* start a new stacking context */
  z-index: 0 !important;
}

/* If any theme injects white/transparent overlays via pseudo-elements,
   disable them for cards (temporary while we diagnose). */
.post-card::before,
.post-card::after,
.post-card .thumb::before,
.post-card .thumb::after,
.post-card .media::before,
.post-card .media::after {
  content: none !important;
  display: none !important;
}

/* Make sure the image never wins the stacking contest */
.post-card .thumb,
.post-card .media,
.post-card .thumb img,
.post-card .media img {
  position: relative !important;
  z-index: 1 !important;       /* below the body (set to 10 below) */
  pointer-events: none !important;
}

/* Put the text body decisively on top */
.post-card .body {
  position: relative !important;
  z-index: 10 !important;
  opacity: 1 !important;
  visibility: visible !important;
  color: #111 !important;
  background: #fff !important;
}

/* As a last-resort visibility guard for the text elements */
.post-card h3,
.post-card .byline,
.post-card p {
  position: relative !important;
  z-index: 11 !important;
  color: #111 !important;
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
}
/* === OkObserver: final fix for clipped post text (2025-11-01 overflow release) === */
/* Prevent card overflow from hiding title/byline/excerpt under the image */

.post-card,
.post-card.card {
  overflow: visible !important;    /* allow internal text to show */
  background: #fff !important;
  position: relative !important;
  z-index: 0 !important;
}

/* Optional: ensure body padding always counts inside grid cells */
.post-card .body {
  padding: 14px 16px 16px !important;
  display: block !important;
}
/* === OkObserver: card column layout fix (2025-11-01 FLEX) === */
/* Ensures image sits on top and text flows underneath without clipping. */

.post-card,
.post-card.card {
  display: flex !important;
  flex-direction: column !important;
  align-items: stretch !important;
  overflow: visible !important;   /* keep from cutting off text */
}

.post-card .thumb,
.post-card .media {
  display: block !important;
  flex: 0 0 auto !important;      /* image takes only its own height */
  position: relative !important;
  z-index: 0 !important;
  overflow: hidden !important;     /* keep rounded-corner look on image area */
  border-top-left-radius: 14px !important;
  border-top-right-radius: 14px !important;
}

.post-card .thumb img,
.post-card .media img {
  display: block !important;
  width: 100% !important;
  height: auto !important;         /* prevent forcing a fixed height that masks text */
  object-fit: cover !important;    /* keeps nice crop without overflow */
  pointer-events: none !important; /* avoid covering text clicks */
}

.post-card .body {
  flex: 0 0 auto !important;       /* body claims its own natural height */
  display: block !important;
  padding: 14px 16px 16px !important;
  background: #fff !important;
  color: #111 !important;
  z-index: 1 !important;           /* sits above the image area if needed */
}
/* === OkObserver: final Home card visibility & flow fix (2025-11-01F) === */
/* Ensures each post-card expands naturally to fit text content. */

.post-grid .post-card,
.posts-grid .post-card {
  height: auto !important;              /* no fixed height */
  min-height: unset !important;         /* remove any implicit min constraint */
  display: flex !important;
  flex-direction: column !important;
  align-items: stretch !important;
  justify-content: flex-start !important;
  overflow: visible !important;
}

.post-grid .post-card .thumb img,
.posts-grid .post-card .thumb img,
.post-grid .post-card .media img,
.posts-grid .post-card .media img {
  width: 100% !important;
  height: auto !important;
  max-height: none !important;
  object-fit: cover !important;
}

.post-grid .post-card .body,
.posts-grid .post-card .body {
  flex: 1 1 auto !important;
  display: block !important;
  padding: 14px 16px 16px !important;
  color: #111 !important;
  background: #fff !important;
  font-size: 1rem !important;
  opacity: 1 !important;
  visibility: visible !important;
}
/* === OkObserver: 2025-11-01 hotfix pack === */

/* Header must remain sticky & above content */
header {
  position: sticky !important;
  top: 0 !important;
  z-index: 1000 !important;
}

/* Card text should NOT inherit blue backgrounds */
.post-card h3,
.post-card h3 a,
.post-card .byline,
.post-card p {
  background: transparent !important;
  color: #111 !important;
  text-decoration: none !important;
}

/* Image area is clickable (link), but must not cover text below */
.post-card .thumb,
.post-card .media {
  position: relative !important;
  z-index: 0 !important;
  overflow: hidden !important;
  display: block !important;
}
.post-card .thumb a,
.post-card .media a,
.post-card .thumb,
.post-card .media {
  pointer-events: auto !important;   /* restore click */
}
.post-card .thumb img,
.post-card .media img {
  display: block !important;
  width: 100% !important;
  height: auto !important;
  object-fit: cover !important;
  pointer-events: auto !important;   /* allow clicking the image link */
}
.post-card .body {
  position: relative !important;
  z-index: 1 !important;             /* keep text above any image quirks */
  background: #fff !important;
}

/* Back-to-posts button look */
.post-detail footer a[href^="#/"] {
  display: inline-block !important;
  padding: 10px 14px !important;
  border-radius: 10px !important;
  background: #f2f4f7 !important;
  color: #111 !important;
  border: 1px solid #dcdfe4 !important;
  text-decoration: none !important;
}
.post-detail footer a[href^="#/"]:hover {
  background: #e9eef3 !important;
}
/* === OkObserver: 2025-11-01 hotfix pack === */

/* Header sticky & above content */
header { position: sticky !important; top: 0 !important; z-index: 1000 !important; }

/* Card layout: image on top, text below; no clipping */
.post-card, .post-card.card {
  display: flex !important;
  flex-direction: column !important;
  align-items: stretch !important;
  overflow: visible !important;
  background: #fff !important;
}

/* Image area clickable but not covering text */
.post-card .thumb, .post-card .media {
  display: block !important;
  position: relative !important;
  z-index: 0 !important;
  overflow: hidden !important;
  border-top-left-radius: 14px !important;
  border-top-right-radius: 14px !important;
}
.post-card .thumb img, .post-card .media img {
  display: block !important;
  width: 100% !important;
  height: auto !important;
  object-fit: cover !important;
  pointer-events: auto !important; /* ensure clicks go through to the link */
}

/* Text area visible, clean colors (no blue background) */
.post-card .body {
  position: relative !important;
  z-index: 1 !important;
  padding: 14px 16px 16px !important;
  color: #111 !important;
  background: #fff !important;
}
.post-card h3, .post-card h3 a, .post-card .byline, .post-card p {
  background: transparent !important;
  color: #111 !important;
  text-decoration: none !important;
}

/* Back-to-posts button style (detail page only) */
.post-detail footer a[href^="#/"] {
  display: inline-block !important;
  padding: 10px 14px !important;
  border-radius: 10px !important;
  background: #f2f4f7 !important;
  color: #111 !important;
  border: 1px solid #dcdfe4 !important;
  text-decoration: none !important;
}
.post-detail footer a[href^="#/"]:hover { background: #e9eef3 !important; }
/* === OkObserver 2025-11-01d: kill blue backgrounds on summaries === */
.post-card h3,
.post-card h3 a,
.post-card .byline,
.post-card p {
  background: transparent !important;
}
/* === OkObserver 2025-11-01e: Remove blue from post detail titles === */
.post-detail h1,
.post-detail .post-title,
.post-detail header .post-title,
.post-detail .byline {
  background: transparent !important;
  color: #111 !important;
  text-shadow: none !important;
  padding: 0 !important;
  margin-top: 0.5rem !important;
}

.post-detail h1 a,
.post-detail .byline a {
  color: #111 !important;
  text-decoration: none !important;
}
.post-detail h1,
.post-detail .post-title {
  background: transparent !important;
  color: #1E90FF !important;
}
/* === OkObserver 2025-11-01f: kill blue bar on Post Detail header === */
.post-detail,
.post-detail * {
  background-image: none !important;
}

.post-detail .post-header,
.post-detail header.post-header,
.post-detail .post-title,
.post-detail .byline {
  background: transparent !important;
  box-shadow: none !important;
  border: 0 !important;
}

/* Guard against pseudo-element bars */
.post-detail .post-header::before,
.post-detail .post-header::after,
.post-detail .post-title::before,
.post-detail .post-title::after,
.post-detail .byline::before,
.post-detail .byline::after {
  content: none !important;
  display: none !important;
}
