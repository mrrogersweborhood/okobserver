<!DOCTYPE html>
<html lang="en">
  <!-- ðŸŸ¢ index.html â€¢ Build 2025-11-08-gridFix2 â€¢ includes JS grid enforcer -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>The Oklahoma Observer</title>

    <!-- favicon -->
    <link rel="icon" href="favicon.ico" />

    <!-- Core Styles -->
    <link rel="stylesheet" href="override.css?v=2025-11-08-gridFix2" />

    <!-- Manifest & PWA support -->
    <link rel="manifest" href="manifest.json" />

    <!-- Meta -->
    <meta name="theme-color" content="#1E90FF" />
  </head>

  <body>
    <!-- HEADER -->
    <header class="site-header">
      <div class="header-inner">
        <img src="logo.png" alt="The Oklahoma Observer logo" class="logo" />
        <p class="motto">To comfort the afflicted and afflict the comfortable</p>
        <button id="menu-toggle" aria-label="Toggle navigation">&#9776;</button>
      </div>
      <nav id="nav-menu" class="hidden">
        <a href="#/">Posts</a>
        <a href="#/about">About</a>
      </nav>
    </header>

    <!-- MAIN APP ROOT -->
    <main id="app"></main>

    <!-- FOOTER -->
    <footer class="site-footer">
      <p>
        Â© 2025 The Oklahoma Observer â€¢ Build 2025-11-08-gridFix2<br />
        To comfort the afflicted and afflict the comfortable
      </p>
    </footer>

    <!-- Main JS App -->
    <script defer src="main.js?v=2025-11-08-gridFix2"></script>

    <!-- Service Worker Registration -->
    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
          navigator.serviceWorker
            .register("sw.js?v=2025-11-08-gridFix2")
            .then((reg) =>
              console.log("[OkObserver] SW registered:", reg.scope)
            )
            .catch((err) =>
              console.warn("[OkObserver] SW registration failed:", err)
            );
        });
      }
    </script>

    <!-- ðŸ§© Grid Enforcer Script -->
    <script>
      (() => {
        // Enforce 4/3/1 columns on any post-card container
        const apply = () => {
          const cols = innerWidth < 720 ? 1 : innerWidth < 1100 ? 3 : 4;
          document
            .querySelectorAll(
              'div:has(> .post-card):not(.post-detail), .posts-grid, .posts-list, #posts, .cards-wrap'
            )
            .forEach((wrap) => {
              if (wrap.closest(".post-detail")) return;
              Object.assign(wrap.style, {
                display: "grid",
                gridTemplateColumns: `repeat(${cols}, minmax(0, 1fr))`,
                gap: "22px",
              });
            });
        };
        const root = document.querySelector("main") || document.body;
        new MutationObserver(apply).observe(root, {
          childList: true,
          subtree: true,
        });
        addEventListener("resize", apply);
        apply();
      })();
    </script>
  </body>
</html>
<!-- ðŸ”´ index.html -->
